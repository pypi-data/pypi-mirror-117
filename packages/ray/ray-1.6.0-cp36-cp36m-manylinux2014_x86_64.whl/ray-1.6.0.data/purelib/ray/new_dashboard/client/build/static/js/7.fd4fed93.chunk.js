(this["webpackJsonpray-dashboard-client"]=this["webpackJsonpray-dashboard-client"]||[]).push([[7],{255:function(e,t,a){"use strict";var n=a(223),r=a(180),c=a(0),l=a.n(c),o=Object(n.a)((function(e){return{card:{padding:e.spacing(2),paddingTop:e.spacing(1.5),margin:[e.spacing(2),e.spacing(1)].map((function(e){return"".concat(e,"px")})).join(" ")},title:{fontSize:e.typography.fontSize+2,fontWeight:500,color:e.palette.text.secondary,marginBottom:e.spacing(1)},body:{padding:e.spacing(.5)}}}));t.a=function(e){var t=e.title,a=e.children,n=o();return l.a.createElement(r.a,{className:n.card},l.a.createElement("div",{className:n.title},t),l.a.createElement("div",{className:n.body},a))}},256:function(e,t,a){"use strict";a.d(t,"a",(function(){return f}));var n,r,c=a(8),l=a(79),o=a(76),i=a(78),s=a(242),d=a(75),u=a(284),m=a(243),p=a(0),g=a.n(p);!function(e){e.ALIVE="ALIVE",e.PENDING="PENDING",e.RECONSTRUCTING="RECONSTRUCTING",e.DEAD="DEAD"}(n||(n={}));var b={node:{ALIVE:l.a,DEAD:o.a},actor:(r={},Object(c.a)(r,n.ALIVE,l.a),Object(c.a)(r,n.DEAD,o.a),Object(c.a)(r,n.PENDING,i.a),Object(c.a)(r,n.RECONSTRUCTING,s.a),r),job:{INIT:d.a,SUBMITTED:i.a,DISPATCHED:s.a,RUNNING:l.a,COMPLETED:u.a,FINISHED:u.a,FAILED:o.a}},E={deps:i.a,INFO:u.a,ERROR:o.a},f=function(e){var t=e.type,a=e.status,n=e.suffix,r={padding:"2px 8px",border:"solid 1px",borderRadius:4,fontSize:12,margin:2},c=m.a;return E[t]?c=E[t]:"string"===typeof a&&b[t]&&b[t][a]&&(c=b[t][a]),r.color=c[500],r.borderColor=c[500],c!==m.a&&(r.backgroundColor="".concat(c[500],"20")),g.a.createElement("span",{style:r},a,n)}},258:function(e,t,a){"use strict";a.d(t,"a",(function(){return u})),a.d(t,"b",(function(){return m}));var n=a(223),r=a(240),c=a(285),l=a(234),o=a(286),i=a(0),s=a.n(i),d=Object(n.a)((function(e){return{search:{margin:e.spacing(1),marginTop:0}}})),u=function(e){var t=e.label,a=e.onChange,n=e.defaultValue,l=d();return s.a.createElement(r.a,{className:l.search,size:"small",label:t,InputProps:{onChange:function(e){var t=e.target.value;a&&a(t)},defaultValue:n,endAdornment:s.a.createElement(c.a,{position:"end"},s.a.createElement(o.a,null))}})},m=function(e){var t=e.label,a=e.onChange,n=e.options,c=d();return s.a.createElement(r.a,{className:c.search,size:"small",label:t,select:!0,SelectProps:{onChange:function(e){var t=e.target.value;a&&a(t)},style:{width:100}}},s.a.createElement(l.a,{value:""},"All"),n.map((function(e){return"string"===typeof e?s.a.createElement(l.a,{value:e},e):s.a.createElement(l.a,{value:e[0]},e[1])})))}},260:function(e,t,a){"use strict";a.d(t,"a",(function(){return i})),a.d(t,"b",(function(){return s}));var n=a(29),r=a(38),c=a(6),l=a(270),o=a(0),i=function(){var e=Object(o.useState)([]),t=Object(c.a)(e,2),a=t[0],n=t[1];return{changeFilter:function(e,t){var c=a.find((function(t){return t.key===e}));c?c.val=t:a.push({key:e,val:t}),n(Object(r.a)(a))},filterFunc:function(e){return a.every((function(t){return!t.val||Object(l.get)(e,t.key,"").toString().includes(t.val)}))}}},s=function(e){var t=Object(o.useState)({key:e||"",desc:!1}),a=Object(c.a)(t,2),r=a[0],i=a[1];return{sorterFunc:function(e,t){if(!r.key)return 0;var a=e,n=t;return r.desc&&(n=e,a=t),Object(l.get)(n,r.key)?Object(l.get)(a,r.key)?Object(l.get)(n,r.key)>Object(l.get)(a,r.key)?1:-1:1:-1},setSortKey:function(e){return i(Object(n.a)(Object(n.a)({},r),{},{key:e}))},setOrderDesc:function(e){return i(Object(n.a)(Object(n.a)({},r),{},{desc:e}))},sorterKey:r.key}}},261:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var n=function(e){return e<1024?"".concat(e,"KB"):e<Math.pow(1024,2)?"".concat((e/Math.pow(1024,1)).toFixed(2),"KB"):e<Math.pow(1024,3)?"".concat((e/Math.pow(1024,2)).toFixed(2),"MB"):e<Math.pow(1024,4)?"".concat((e/Math.pow(1024,3)).toFixed(2),"GB"):e<Math.pow(1024,5)?"".concat((e/Math.pow(1024,4)).toFixed(2),"TB"):e<Math.pow(1024,6)?"".concat((e/Math.pow(1024,5)).toFixed(2),"TB"):""}},262:function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));var n=a(225),r=a(0),c=a.n(r),l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:28;return c.a.createElement(n.a,{title:e,interactive:!0},c.a.createElement("span",null,e.length>t?e.slice(0,t)+"...":e))}},264:function(e,t,a){"use strict";var n=a(29),r=a(6),c=a(240),l=a(285),o=a(230),i=a(228),s=a(229),d=a(227),u=a(231),m=a(77),p=a(286),g=a(514),b=a(513),E=a(0),f=a.n(E),h=a(81),v=a(89),y=a(262),j=a(260),k=a(266),O=a(256),I=a(267);t.a=function(e){var t=e.actors,a=void 0===t?{}:t,x=e.workers,C=void 0===x?[]:x,w=Object(E.useState)(1),N=Object(r.a)(w,2),S=N[0],A=N[1],D=Object(j.a)(),M=D.changeFilter,P=D.filterFunc,T=Object(E.useState)(10),R=Object(r.a)(T,2),F=R[0],L=R[1],z=Object(E.useContext)(v.a).ipLogMap,B=Object.values(a||{}).map((function(e){var t,a,r,c;return Object(n.a)(Object(n.a)({},e),{},{functionDesc:Object.values((null===(t=e.taskSpec)||void 0===t||null===(a=t.functionDescriptor)||void 0===a?void 0:a.javaFunctionDescriptor)||(null===(r=e.taskSpec)||void 0===r||null===(c=r.functionDescriptor)||void 0===c?void 0:c.pythonFunctionDescriptor)||{}).join(" ")})})).filter(P),$=B.slice((S-1)*F,S*F);return f.a.createElement(f.a.Fragment,null,f.a.createElement("div",{style:{flex:1,display:"flex",alignItems:"center"}},f.a.createElement(g.a,{style:{margin:8,width:120},options:Array.from(new Set(Object.values(a).map((function(e){return e.state})))),onInputChange:function(e,t){M("state",t.trim())},renderInput:function(e){return f.a.createElement(c.a,Object.assign({},e,{label:"State"}))}}),f.a.createElement(g.a,{style:{margin:8,width:150},options:Array.from(new Set(Object.values(a).map((function(e){var t;return null===(t=e.address)||void 0===t?void 0:t.ipAddress})))),onInputChange:function(e,t){M("address.ipAddress",t.trim())},renderInput:function(e){return f.a.createElement(c.a,Object.assign({},e,{label:"IP"}))}}),f.a.createElement(c.a,{style:{margin:8,width:120},label:"PID",size:"small",InputProps:{onChange:function(e){var t=e.target.value;M("pid",t.trim())},endAdornment:f.a.createElement(l.a,{position:"end"},f.a.createElement(p.a,null))}}),f.a.createElement(c.a,{style:{margin:8,width:200},label:"Task Func Desc",size:"small",InputProps:{onChange:function(e){var t=e.target.value;M("functionDesc",t.trim())},endAdornment:f.a.createElement(l.a,{position:"end"},f.a.createElement(p.a,null))}}),f.a.createElement(c.a,{style:{margin:8,width:120},label:"Name",size:"small",InputProps:{onChange:function(e){var t=e.target.value;M("name",t.trim())},endAdornment:f.a.createElement(l.a,{position:"end"},f.a.createElement(p.a,null))}}),f.a.createElement(c.a,{style:{margin:8,width:120},label:"Actor ID",size:"small",InputProps:{onChange:function(e){var t=e.target.value;M("actorId",t.trim())},endAdornment:f.a.createElement(l.a,{position:"end"},f.a.createElement(p.a,null))}}),f.a.createElement(c.a,{style:{margin:8,width:120},label:"Page Size",size:"small",InputProps:{onChange:function(e){var t=e.target.value;L(Math.min(Number(t),500)||10)}}})),f.a.createElement("div",{style:{display:"flex",alignItems:"center"}},f.a.createElement("div",null,f.a.createElement(b.a,{page:S,onChange:function(e,t){return A(t)},count:Math.ceil(B.length/F)})),f.a.createElement("div",null,f.a.createElement(k.a,{type:"actor",list:B}))),f.a.createElement(o.a,null,f.a.createElement(i.a,null,f.a.createElement(s.a,null,["","ID(Num Restarts)","Name","Task Func Desc","Job Id","Pid","IP","Port","State","Log"].map((function(e){return f.a.createElement(d.a,{align:"center",key:e},e)})))),f.a.createElement(u.a,null,$.map((function(e){var t=e.actorId,a=e.functionDesc,n=e.jobId,r=e.pid,c=e.address,l=e.state,o=e.name,i=e.numRestarts;return f.a.createElement(I.a,{length:C.filter((function(e){return e.pid===r&&c.ipAddress===e.coreWorkerStats[0].ipAddress})).length,expandComponent:f.a.createElement(I.b,{actorMap:{},workers:C.filter((function(e){return e.pid===r&&c.ipAddress===e.coreWorkerStats[0].ipAddress})),mini:!0}),key:t},f.a.createElement(d.a,{align:"center",style:{color:Number(i)>0?m.a[500]:"inherit"}},t,"(",i,")"),f.a.createElement(d.a,{align:"center"},o),f.a.createElement(d.a,{align:"center"},Object(y.a)(a,60)),f.a.createElement(d.a,{align:"center"},n),f.a.createElement(d.a,{align:"center"},r),f.a.createElement(d.a,{align:"center"},null===c||void 0===c?void 0:c.ipAddress),f.a.createElement(d.a,{align:"center"},null===c||void 0===c?void 0:c.port),f.a.createElement(d.a,{align:"center"},f.a.createElement(O.a,{type:"actor",status:l})),f.a.createElement(d.a,{align:"center"},z[null===c||void 0===c?void 0:c.ipAddress]&&f.a.createElement(h.b,{target:"_blank",to:"/log/".concat(encodeURIComponent(z[null===c||void 0===c?void 0:c.ipAddress]),"?fileName=").concat(n,"-").concat(r)},"Log")))})))))}},265:function(e,t,a){"use strict";var n=a(223),r=a(0),c=a.n(r),l=Object(n.a)((function(e){return{container:{background:"linear-gradient(45deg, #21CBF3ee 30%, #2196F3ee 90%)",border:"1px solid #ffffffbb",padding:"0 12px",height:18,lineHeight:"18px",position:"relative",boxSizing:"content-box",borderRadius:4},displayBar:{background:e.palette.background.paper,position:"absolute",right:0,height:18,transition:"0.5s width",borderRadius:2,borderTopLeftRadius:0,borderBottomLeftRadius:0,border:"2px solid transparent",boxSizing:"border-box"},text:{fontSize:12,zIndex:2,position:"relative",color:e.palette.text.primary,width:"100%",textAlign:"center"}}}));t.a=function(e){var t=e.num,a=e.total,n=l(),r=Math.round(t/a*100);return c.a.createElement("div",{className:n.container},c.a.createElement("div",{className:n.displayBar,style:{width:"".concat(Math.min(Math.max(0,100-r),100),"%")}}),c.a.createElement("div",{className:n.text},e.children))}},266:function(e,t,a){"use strict";var n=a(6),r=a(224),c=a(0),l=a.n(c),o=a(256);t.a=function(e){var t=e.type,a=e.list,c={};return a.forEach((function(e){var t=e.state;c[t]=c[t]+1||1})),l.a.createElement(r.a,{container:!0,spacing:2,alignItems:"center"},l.a.createElement(r.a,{item:!0},l.a.createElement(o.a,{status:"TOTAL",type:t,suffix:"x ".concat(a.length)})),Object.entries(c).map((function(e){var a=Object(n.a)(e,2),c=a[0],i=a[1];return l.a.createElement(r.a,{item:!0},l.a.createElement(o.a,{status:c,type:t,suffix:" x ".concat(i)}))})))}},267:function(e,t,a){"use strict";a.d(t,"a",(function(){return N}));var n=a(6),r=a(2),c=a(229),l=a(227),o=a(181),i=a(287),s=a(235),d=a(230),u=a(228),m=a(231),p=a(224),g=a(510),b=a(511),E=a(263),f=a.n(E),h=a(0),v=a.n(h),y=a(81),j=a(89),k=a(261),O=a(262),I=a(260),x=a(264),C=a(265),w=a(258),N=function(e){var t=e.children,a=e.expandComponent,i=e.length,s=e.stateKey,d=void 0===s?"":s,u=Object(r.a)(e,["children","expandComponent","length","stateKey"]),m=v.a.useState(!1),p=Object(n.a)(m,2),E=p[0],f=p[1];return Object(h.useEffect)((function(){d.startsWith("ON")?f(!0):d.startsWith("OFF")&&f(!1)}),[d]),i<1?v.a.createElement(c.a,u,v.a.createElement(l.a,{padding:"checkbox"}),t):v.a.createElement(v.a.Fragment,null,v.a.createElement(c.a,u,v.a.createElement(l.a,{padding:"checkbox"},v.a.createElement(o.a,{style:{color:"inherit"},onClick:function(){return f(!E)}},i,E?v.a.createElement(g.a,null):v.a.createElement(b.a,null))),t),E&&v.a.createElement(c.a,null,v.a.createElement(l.a,{colSpan:24},a)))},S=function(e){var t=e.actorMap,a=e.coreWorkerStats,n={};return(a||[]).filter((function(e){return t[e.actorId]})).forEach((function(e){return n[e.actorId]=t[e.actorId]})),Object.values(n).length?v.a.createElement(i.a,null,v.a.createElement(x.a,{actors:n})):v.a.createElement("p",null,"The Worker Haven't Had Related Actor Yet.")};t.b=function(e){var t=e.workers,a=void 0===t?[]:t,r=e.actorMap,o=e.mini,i=Object(I.a)(),g=i.changeFilter,b=i.filterFunc,E=Object(h.useState)(""),x=Object(n.a)(E,2),A=x[0],D=x[1],M=Object(h.useContext)(j.a),P=M.nodeMap,T=M.ipLogMap;return v.a.createElement(v.a.Fragment,null,!o&&v.a.createElement("div",{style:{display:"flex",alignItems:"center"}},v.a.createElement(w.a,{label:"Pid",onChange:function(e){return g("pid",e)}}),v.a.createElement(s.a,{onClick:function(){return D("ON".concat(Math.random()))}},"Expand All"),v.a.createElement(s.a,{onClick:function(){return D("OFF".concat(Math.random()))}},"Collapse All"))," ",v.a.createElement(d.a,null,v.a.createElement(u.a,null,v.a.createElement(c.a,null,["","Pid","CPU","CPU Times","Memory","CMD Line","Create Time","Log","Ops","IP/Hostname"].map((function(e){return v.a.createElement(l.a,{align:"center",key:e},e)})))),v.a.createElement(m.a,null,a.filter(b).sort((function(e,t){var a=(e.coreWorkerStats||[]).filter((function(e){return r[e.actorId]})).length||0;return((t.coreWorkerStats||[]).filter((function(e){return r[e.actorId]})).length||0)-a})).map((function(e){var t=e.pid,a=e.cpuPercent,c=e.cpuTimes,o=e.memoryInfo,i=e.cmdline,d=e.createTime,u=e.coreWorkerStats,m=void 0===u?[]:u,g=e.language,b=e.ip,E=e.hostname;return v.a.createElement(N,{expandComponent:v.a.createElement(S,{actorMap:r,coreWorkerStats:m}),length:(m||[]).filter((function(e){return r[e.actorId]})).length,key:t,stateKey:A},v.a.createElement(l.a,{align:"center"},t),v.a.createElement(l.a,{align:"center"},v.a.createElement(C.a,{num:Number(a),total:100},a,"%")),v.a.createElement(l.a,{align:"center"},v.a.createElement("div",{style:{maxHeight:55,overflow:"auto"}},Object.entries(c||{}).map((function(e){var t=Object(n.a)(e,2),a=t[0],r=t[1];return v.a.createElement("div",{style:{margin:4}},a,":",r)})))),v.a.createElement(l.a,{align:"center"},v.a.createElement("div",{style:{maxHeight:55,overflow:"auto"}},Object.entries(o||{}).map((function(e){var t=Object(n.a)(e,2),a=t[0],r=t[1];return v.a.createElement("div",{style:{margin:4}},a,":",Object(k.a)(r))})))),v.a.createElement(l.a,{align:"center",style:{lineBreak:"anywhere"}},i&&Object(O.a)(i.filter((function(e){return e})).join(" "))),v.a.createElement(l.a,{align:"center"},f()(1e3*d).format("YYYY/MM/DD HH:mm:ss")),v.a.createElement(l.a,{align:"center"},v.a.createElement(p.a,{container:!0,spacing:2},T[b]&&v.a.createElement(p.a,{item:!0},v.a.createElement(y.b,{target:"_blank",to:"/log/".concat(encodeURIComponent(T[b]),"?fileName=").concat(m[0].jobId||"","-").concat(t)},"Log")))),v.a.createElement(l.a,{align:"center"},"JAVA"===g&&v.a.createElement("div",null,v.a.createElement(s.a,{onClick:function(){var e;window.open("#/cmd/jstack/".concat(null===(e=m[0])||void 0===e?void 0:e.ipAddress,"/").concat(t))}},"jstack")," ",v.a.createElement(s.a,{onClick:function(){var e;window.open("#/cmd/jmap/".concat(null===(e=m[0])||void 0===e?void 0:e.ipAddress,"/").concat(t))}},"jmap"),v.a.createElement(s.a,{onClick:function(){var e;window.open("#/cmd/jstat/".concat(null===(e=m[0])||void 0===e?void 0:e.ipAddress,"/").concat(t))}},"jstat"))),v.a.createElement(l.a,{align:"center"},b,v.a.createElement("br",null),P[E]?v.a.createElement(y.b,{target:"_blank",to:"/node/".concat(P[E])},E):E))})))))}},268:function(e,t,a){"use strict";var n=a(189),r=a(232),c=a(0),l=a.n(c);t.a=function(e){var t=e.loading;return l.a.createElement(n.a,{open:t,style:{zIndex:100}},l.a.createElement(r.a,{color:"primary"}))}},272:function(e,t,a){"use strict";var n=a(1),r=a(2),c=a(0),l=(a(5),a(3)),o=a(4),i=a(13),s=a(7),d=a(90),u=c.forwardRef((function(e,t){var a=e.classes,o=e.className,i=e.color,u=void 0===i?"secondary":i,m=e.edge,p=void 0!==m&&m,g=e.size,b=void 0===g?"medium":g,E=Object(r.a)(e,["classes","className","color","edge","size"]),f=c.createElement("span",{className:a.thumb});return c.createElement("span",{className:Object(l.a)(a.root,o,{start:a.edgeStart,end:a.edgeEnd}[p],"small"===b&&a["size".concat(Object(s.a)(b))])},c.createElement(d.a,Object(n.a)({type:"checkbox",icon:f,checkedIcon:f,classes:{root:Object(l.a)(a.switchBase,a["color".concat(Object(s.a)(u))]),input:a.input,checked:a.checked,disabled:a.disabled},ref:t},E)),c.createElement("span",{className:a.track}))}));t.a=Object(o.a)((function(e){return{root:{display:"inline-flex",width:58,height:38,overflow:"hidden",padding:12,boxSizing:"border-box",position:"relative",flexShrink:0,zIndex:0,verticalAlign:"middle","@media print":{colorAdjust:"exact"}},edgeStart:{marginLeft:-8},edgeEnd:{marginRight:-8},switchBase:{position:"absolute",top:0,left:0,zIndex:1,color:"light"===e.palette.type?e.palette.grey[50]:e.palette.grey[400],transition:e.transitions.create(["left","transform"],{duration:e.transitions.duration.shortest}),"&$checked":{transform:"translateX(20px)"},"&$disabled":{color:"light"===e.palette.type?e.palette.grey[400]:e.palette.grey[800]},"&$checked + $track":{opacity:.5},"&$disabled + $track":{opacity:"light"===e.palette.type?.12:.1}},colorPrimary:{"&$checked":{color:e.palette.primary.main,"&:hover":{backgroundColor:Object(i.c)(e.palette.primary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"&$disabled":{color:"light"===e.palette.type?e.palette.grey[400]:e.palette.grey[800]},"&$checked + $track":{backgroundColor:e.palette.primary.main},"&$disabled + $track":{backgroundColor:"light"===e.palette.type?e.palette.common.black:e.palette.common.white}},colorSecondary:{"&$checked":{color:e.palette.secondary.main,"&:hover":{backgroundColor:Object(i.c)(e.palette.secondary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"&$disabled":{color:"light"===e.palette.type?e.palette.grey[400]:e.palette.grey[800]},"&$checked + $track":{backgroundColor:e.palette.secondary.main},"&$disabled + $track":{backgroundColor:"light"===e.palette.type?e.palette.common.black:e.palette.common.white}},sizeSmall:{width:40,height:24,padding:7,"& $thumb":{width:16,height:16},"& $switchBase":{padding:4,"&$checked":{transform:"translateX(16px)"}}},checked:{},disabled:{},input:{left:"-100%",width:"300%"},thumb:{boxShadow:e.shadows[1],backgroundColor:"currentColor",width:20,height:20,borderRadius:"50%"},track:{height:"100%",width:"100%",borderRadius:7,zIndex:-1,transition:e.transitions.create(["opacity","background-color"],{duration:e.transitions.duration.shortest}),backgroundColor:"light"===e.palette.type?e.palette.common.black:e.palette.common.white,opacity:"light"===e.palette.type?.38:.3}}}),{name:"MuiSwitch"})(u)},278:function(e,t,a){"use strict";a.d(t,"b",(function(){return r})),a.d(t,"a",(function(){return c}));var n=a(53),r=function(){return Object(n.b)("jobs?view=summary")},c=function(e){return Object(n.b)("jobs/".concat(e))}},521:function(e,t,a){"use strict";a.r(t);var n=a(223),r=a(272),c=a(247),l=a(241),o=a(224),i=a(287),s=a(230),d=a(228),u=a(229),m=a(227),p=a(231),g=a(0),b=a.n(g),E=a(81),f=a(264),h=a(268),v=a(256),y=a(255),j=a(267),k=a(262),O=a(12),I=a.n(O),x=a(17),C=a(6),w=a(89),N=a(278),S=Object(n.a)((function(e){return{root:{padding:e.spacing(2)},paper:{padding:e.spacing(2),marginTop:e.spacing(2),marginBottom:e.spacing(2)},label:{fontWeight:"bold"},pageMeta:{padding:e.spacing(2),marginTop:e.spacing(2)},tab:{marginBottom:e.spacing(2)},dependenciesChip:{margin:e.spacing(.5),wordBreak:"break-all"},alert:{color:e.palette.error.main}}}));t.default=function(e){var t,a,n,O=S(),A=function(e){var t=e.match.params,a=Object(g.useState)(),n=Object(C.a)(a,2),r=n[0],c=n[1],l=Object(g.useState)("Loading the job detail"),o=Object(C.a)(l,2),i=o[0],s=o[1],d=Object(g.useState)(!0),u=Object(C.a)(d,2),m=u[0],p=u[1],b=Object(g.useState)("info"),E=Object(C.a)(b,2),f=E[0],h=E[1],v=Object(g.useContext)(w.a).ipLogMap,y=Object(g.useRef)(),j=Object(g.useCallback)(Object(x.a)(I.a.mark((function e(){var a,n,r,l;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(m){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Object(N.a)(t.id);case 4:l=e.sent,(null===(a=l.data)||void 0===a||null===(n=a.data)||void 0===n?void 0:n.detail)&&c(l.data.data.detail),(null===(r=l.data)||void 0===r?void 0:r.msg)&&s(l.data.msg||""),!1===l.data.result&&(s("Job Query Error Please Check JobId"),c(void 0),p(!1)),y.current=setTimeout(j,4e3);case 9:case"end":return e.stop()}}),e)}))),[m,t.id]);Object(g.useEffect)((function(){return y.current&&clearTimeout(y.current),j(),function(){y.current&&clearTimeout(y.current)}}),[j]);var k=(r||{}).jobInfo;return{actorMap:null===r||void 0===r?void 0:r.jobActors,jobInfo:k,job:r,msg:i,selectedTab:f,handleChange:function(e,t){h(t)},handleSwitchChange:function(e){p(e.target.checked)},params:t,refreshing:m,ipLogMap:v}}(e),D=A.actorMap,M=A.jobInfo,P=A.job,T=A.msg,R=A.selectedTab,F=A.handleChange,L=A.handleSwitchChange,z=A.params,B=A.refreshing,$=A.ipLogMap;return P&&M?b.a.createElement("div",{className:O.root},b.a.createElement(y.a,{title:"JOB - ".concat(z.id)},b.a.createElement(v.a,{type:"job",status:M.isDead?"DEAD":"ALIVE"}),b.a.createElement("br",null),"Auto Refresh:",b.a.createElement(r.a,{checked:B,onChange:L,name:"refresh",inputProps:{"aria-label":"secondary checkbox"}}),b.a.createElement("br",null),"Request Status: ",T," ",b.a.createElement("br",null)),b.a.createElement(y.a,{title:"Job Detail"},b.a.createElement(c.a,{value:R,onChange:F,className:O.tab},b.a.createElement(l.a,{value:"info",label:"Info"}),b.a.createElement(l.a,{value:"dep",label:"Dependencies"}),b.a.createElement(l.a,{value:"worker",label:"Worker(".concat((null===P||void 0===P||null===(t=P.jobWorkers)||void 0===t?void 0:t.length)||0,")")}),b.a.createElement(l.a,{value:"actor",label:"Actor(".concat(Object.entries((null===P||void 0===P?void 0:P.jobActors)||{}).length||0,")")})),"info"===R&&b.a.createElement(o.a,{container:!0,spacing:2},b.a.createElement(o.a,{item:!0,xs:4},b.a.createElement("span",{className:O.label},"Driver IP"),":"," ",M.driverIpAddress),$[M.driverIpAddress]&&b.a.createElement(o.a,{item:!0,xs:4},b.a.createElement("span",{className:O.label},"Driver Log"),":"," ",b.a.createElement(E.b,{to:"/log/".concat(encodeURIComponent($[M.driverIpAddress]),"?fileName=driver-").concat(M.jobId),target:"_blank"},"Log")),b.a.createElement(o.a,{item:!0,xs:4},b.a.createElement("span",{className:O.label},"Driver Pid"),":"," ",M.driverPid),M.eventUrl&&b.a.createElement(o.a,{item:!0,xs:4},b.a.createElement("span",{className:O.label},"Event Link"),":"," ",b.a.createElement("a",{href:M.eventUrl,target:"_blank",rel:"noopener noreferrer"},"Event Log")),M.failErrorMessage&&b.a.createElement(o.a,{item:!0,xs:12},b.a.createElement("span",{className:O.label},"Fail Error"),":"," ",b.a.createElement("span",{className:O.alert},M.failErrorMessage))),(null===M||void 0===M?void 0:M.dependencies)&&"dep"===R&&b.a.createElement("div",{className:O.paper},(null===M||void 0===M||null===(a=M.dependencies)||void 0===a?void 0:a.python)&&b.a.createElement(y.a,{title:"Python Dependencies"},b.a.createElement("div",{style:{display:"flex",justifyItems:"space-around",flexWrap:"wrap"}},M.dependencies.python.map((function(e){return b.a.createElement(v.a,{type:"deps",status:e.startsWith("http")?Object(k.a)(e,30):e,key:e})})))),(null===M||void 0===M||null===(n=M.dependencies)||void 0===n?void 0:n.java)&&b.a.createElement(y.a,{title:"Java Dependencies"},b.a.createElement(i.a,null,b.a.createElement(s.a,null,b.a.createElement(d.a,null,b.a.createElement(u.a,null,["Name","Version","URL"].map((function(e){return b.a.createElement(m.a,{align:"center",key:e},e)})))),b.a.createElement(p.a,null,M.dependencies.java.map((function(e){var t=e.name,a=e.version,n=e.url;return b.a.createElement(u.a,{key:n},b.a.createElement(m.a,{align:"center"},t),b.a.createElement(m.a,{align:"center"},a),b.a.createElement(m.a,{align:"center"},b.a.createElement("a",{href:n,target:"_blank",rel:"noopener noreferrer"},n)))}))))))),"worker"===R&&b.a.createElement("div",null,b.a.createElement(i.a,{className:O.paper},b.a.createElement(j.b,{workers:P.jobWorkers,actorMap:D||{}}))),"actor"===R&&b.a.createElement("div",null,b.a.createElement(i.a,{className:O.paper},b.a.createElement(f.a,{actors:D||{},workers:P.jobWorkers}))))):b.a.createElement("div",{className:O.root},b.a.createElement(h.a,{loading:T.startsWith("Loading")}),b.a.createElement(y.a,{title:"JOB - ".concat(z.id)},b.a.createElement(v.a,{type:"job",status:"LOADING"}),b.a.createElement("br",null),"Auto Refresh:",b.a.createElement(r.a,{checked:B,onChange:L,name:"refresh",inputProps:{"aria-label":"secondary checkbox"}}),b.a.createElement("br",null),"Request Status: ",T," ",b.a.createElement("br",null)))}}}]);
//# sourceMappingURL=7.fd4fed93.chunk.js.map