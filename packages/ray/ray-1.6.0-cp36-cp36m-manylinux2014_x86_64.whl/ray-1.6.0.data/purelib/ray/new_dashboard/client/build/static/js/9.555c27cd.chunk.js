(this["webpackJsonpray-dashboard-client"]=this["webpackJsonpray-dashboard-client"]||[]).push([[9],{255:function(e,t,a){"use strict";var n=a(223),r=a(180),c=a(0),l=a.n(c),o=Object(n.a)((function(e){return{card:{padding:e.spacing(2),paddingTop:e.spacing(1.5),margin:[e.spacing(2),e.spacing(1)].map((function(e){return"".concat(e,"px")})).join(" ")},title:{fontSize:e.typography.fontSize+2,fontWeight:500,color:e.palette.text.secondary,marginBottom:e.spacing(1)},body:{padding:e.spacing(.5)}}}));t.a=function(e){var t=e.title,a=e.children,n=o();return l.a.createElement(r.a,{className:n.card},l.a.createElement("div",{className:n.title},t),l.a.createElement("div",{className:n.body},a))}},256:function(e,t,a){"use strict";a.d(t,"a",(function(){return E}));var n,r,c=a(8),l=a(79),o=a(76),i=a(78),s=a(242),m=a(75),d=a(284),u=a(243),p=a(0),g=a.n(p);!function(e){e.ALIVE="ALIVE",e.PENDING="PENDING",e.RECONSTRUCTING="RECONSTRUCTING",e.DEAD="DEAD"}(n||(n={}));var v={node:{ALIVE:l.a,DEAD:o.a},actor:(r={},Object(c.a)(r,n.ALIVE,l.a),Object(c.a)(r,n.DEAD,o.a),Object(c.a)(r,n.PENDING,i.a),Object(c.a)(r,n.RECONSTRUCTING,s.a),r),job:{INIT:m.a,SUBMITTED:i.a,DISPATCHED:s.a,RUNNING:l.a,COMPLETED:d.a,FINISHED:d.a,FAILED:o.a}},b={deps:i.a,INFO:d.a,ERROR:o.a},E=function(e){var t=e.type,a=e.status,n=e.suffix,r={padding:"2px 8px",border:"solid 1px",borderRadius:4,fontSize:12,margin:2},c=u.a;return b[t]?c=b[t]:"string"===typeof a&&v[t]&&v[t][a]&&(c=v[t][a]),r.color=c[500],r.borderColor=c[500],c!==u.a&&(r.backgroundColor="".concat(c[500],"20")),g.a.createElement("span",{style:r},a,n)}},258:function(e,t,a){"use strict";a.d(t,"a",(function(){return d})),a.d(t,"b",(function(){return u}));var n=a(223),r=a(240),c=a(285),l=a(234),o=a(286),i=a(0),s=a.n(i),m=Object(n.a)((function(e){return{search:{margin:e.spacing(1),marginTop:0}}})),d=function(e){var t=e.label,a=e.onChange,n=e.defaultValue,l=m();return s.a.createElement(r.a,{className:l.search,size:"small",label:t,InputProps:{onChange:function(e){var t=e.target.value;a&&a(t)},defaultValue:n,endAdornment:s.a.createElement(c.a,{position:"end"},s.a.createElement(o.a,null))}})},u=function(e){var t=e.label,a=e.onChange,n=e.options,c=m();return s.a.createElement(r.a,{className:c.search,size:"small",label:t,select:!0,SelectProps:{onChange:function(e){var t=e.target.value;a&&a(t)},style:{width:100}}},s.a.createElement(l.a,{value:""},"All"),n.map((function(e){return"string"===typeof e?s.a.createElement(l.a,{value:e},e):s.a.createElement(l.a,{value:e[0]},e[1])})))}},260:function(e,t,a){"use strict";a.d(t,"a",(function(){return i})),a.d(t,"b",(function(){return s}));var n=a(29),r=a(38),c=a(6),l=a(270),o=a(0),i=function(){var e=Object(o.useState)([]),t=Object(c.a)(e,2),a=t[0],n=t[1];return{changeFilter:function(e,t){var c=a.find((function(t){return t.key===e}));c?c.val=t:a.push({key:e,val:t}),n(Object(r.a)(a))},filterFunc:function(e){return a.every((function(t){return!t.val||Object(l.get)(e,t.key,"").toString().includes(t.val)}))}}},s=function(e){var t=Object(o.useState)({key:e||"",desc:!1}),a=Object(c.a)(t,2),r=a[0],i=a[1];return{sorterFunc:function(e,t){if(!r.key)return 0;var a=e,n=t;return r.desc&&(n=e,a=t),Object(l.get)(n,r.key)?Object(l.get)(a,r.key)?Object(l.get)(n,r.key)>Object(l.get)(a,r.key)?1:-1:1:-1},setSortKey:function(e){return i(Object(n.a)(Object(n.a)({},r),{},{key:e}))},setOrderDesc:function(e){return i(Object(n.a)(Object(n.a)({},r),{},{desc:e}))},sorterKey:r.key}}},261:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var n=function(e){return e<1024?"".concat(e,"KB"):e<Math.pow(1024,2)?"".concat((e/Math.pow(1024,1)).toFixed(2),"KB"):e<Math.pow(1024,3)?"".concat((e/Math.pow(1024,2)).toFixed(2),"MB"):e<Math.pow(1024,4)?"".concat((e/Math.pow(1024,3)).toFixed(2),"GB"):e<Math.pow(1024,5)?"".concat((e/Math.pow(1024,4)).toFixed(2),"TB"):e<Math.pow(1024,6)?"".concat((e/Math.pow(1024,5)).toFixed(2),"TB"):""}},262:function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));var n=a(225),r=a(0),c=a.n(r),l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:28;return c.a.createElement(n.a,{title:e,interactive:!0},c.a.createElement("span",null,e.length>t?e.slice(0,t)+"...":e))}},264:function(e,t,a){"use strict";var n=a(29),r=a(6),c=a(240),l=a(285),o=a(230),i=a(228),s=a(229),m=a(227),d=a(231),u=a(77),p=a(286),g=a(514),v=a(513),b=a(0),E=a.n(b),f=a(81),h=a(89),y=a(262),k=a(260),j=a(266),O=a(256),x=a(267);t.a=function(e){var t=e.actors,a=void 0===t?{}:t,N=e.workers,w=void 0===N?[]:N,C=Object(b.useState)(1),I=Object(r.a)(C,2),S=I[0],A=I[1],D=Object(k.a)(),M=D.changeFilter,P=D.filterFunc,F=Object(b.useState)(10),R=Object(r.a)(F,2),T=R[0],z=R[1],L=Object(b.useContext)(h.a).ipLogMap,$=Object.values(a||{}).map((function(e){var t,a,r,c;return Object(n.a)(Object(n.a)({},e),{},{functionDesc:Object.values((null===(t=e.taskSpec)||void 0===t||null===(a=t.functionDescriptor)||void 0===a?void 0:a.javaFunctionDescriptor)||(null===(r=e.taskSpec)||void 0===r||null===(c=r.functionDescriptor)||void 0===c?void 0:c.pythonFunctionDescriptor)||{}).join(" ")})})).filter(P),B=$.slice((S-1)*T,S*T);return E.a.createElement(E.a.Fragment,null,E.a.createElement("div",{style:{flex:1,display:"flex",alignItems:"center"}},E.a.createElement(g.a,{style:{margin:8,width:120},options:Array.from(new Set(Object.values(a).map((function(e){return e.state})))),onInputChange:function(e,t){M("state",t.trim())},renderInput:function(e){return E.a.createElement(c.a,Object.assign({},e,{label:"State"}))}}),E.a.createElement(g.a,{style:{margin:8,width:150},options:Array.from(new Set(Object.values(a).map((function(e){var t;return null===(t=e.address)||void 0===t?void 0:t.ipAddress})))),onInputChange:function(e,t){M("address.ipAddress",t.trim())},renderInput:function(e){return E.a.createElement(c.a,Object.assign({},e,{label:"IP"}))}}),E.a.createElement(c.a,{style:{margin:8,width:120},label:"PID",size:"small",InputProps:{onChange:function(e){var t=e.target.value;M("pid",t.trim())},endAdornment:E.a.createElement(l.a,{position:"end"},E.a.createElement(p.a,null))}}),E.a.createElement(c.a,{style:{margin:8,width:200},label:"Task Func Desc",size:"small",InputProps:{onChange:function(e){var t=e.target.value;M("functionDesc",t.trim())},endAdornment:E.a.createElement(l.a,{position:"end"},E.a.createElement(p.a,null))}}),E.a.createElement(c.a,{style:{margin:8,width:120},label:"Name",size:"small",InputProps:{onChange:function(e){var t=e.target.value;M("name",t.trim())},endAdornment:E.a.createElement(l.a,{position:"end"},E.a.createElement(p.a,null))}}),E.a.createElement(c.a,{style:{margin:8,width:120},label:"Actor ID",size:"small",InputProps:{onChange:function(e){var t=e.target.value;M("actorId",t.trim())},endAdornment:E.a.createElement(l.a,{position:"end"},E.a.createElement(p.a,null))}}),E.a.createElement(c.a,{style:{margin:8,width:120},label:"Page Size",size:"small",InputProps:{onChange:function(e){var t=e.target.value;z(Math.min(Number(t),500)||10)}}})),E.a.createElement("div",{style:{display:"flex",alignItems:"center"}},E.a.createElement("div",null,E.a.createElement(v.a,{page:S,onChange:function(e,t){return A(t)},count:Math.ceil($.length/T)})),E.a.createElement("div",null,E.a.createElement(j.a,{type:"actor",list:$}))),E.a.createElement(o.a,null,E.a.createElement(i.a,null,E.a.createElement(s.a,null,["","ID(Num Restarts)","Name","Task Func Desc","Job Id","Pid","IP","Port","State","Log"].map((function(e){return E.a.createElement(m.a,{align:"center",key:e},e)})))),E.a.createElement(d.a,null,B.map((function(e){var t=e.actorId,a=e.functionDesc,n=e.jobId,r=e.pid,c=e.address,l=e.state,o=e.name,i=e.numRestarts;return E.a.createElement(x.a,{length:w.filter((function(e){return e.pid===r&&c.ipAddress===e.coreWorkerStats[0].ipAddress})).length,expandComponent:E.a.createElement(x.b,{actorMap:{},workers:w.filter((function(e){return e.pid===r&&c.ipAddress===e.coreWorkerStats[0].ipAddress})),mini:!0}),key:t},E.a.createElement(m.a,{align:"center",style:{color:Number(i)>0?u.a[500]:"inherit"}},t,"(",i,")"),E.a.createElement(m.a,{align:"center"},o),E.a.createElement(m.a,{align:"center"},Object(y.a)(a,60)),E.a.createElement(m.a,{align:"center"},n),E.a.createElement(m.a,{align:"center"},r),E.a.createElement(m.a,{align:"center"},null===c||void 0===c?void 0:c.ipAddress),E.a.createElement(m.a,{align:"center"},null===c||void 0===c?void 0:c.port),E.a.createElement(m.a,{align:"center"},E.a.createElement(O.a,{type:"actor",status:l})),E.a.createElement(m.a,{align:"center"},L[null===c||void 0===c?void 0:c.ipAddress]&&E.a.createElement(f.b,{target:"_blank",to:"/log/".concat(encodeURIComponent(L[null===c||void 0===c?void 0:c.ipAddress]),"?fileName=").concat(n,"-").concat(r)},"Log")))})))))}},265:function(e,t,a){"use strict";var n=a(223),r=a(0),c=a.n(r),l=Object(n.a)((function(e){return{container:{background:"linear-gradient(45deg, #21CBF3ee 30%, #2196F3ee 90%)",border:"1px solid #ffffffbb",padding:"0 12px",height:18,lineHeight:"18px",position:"relative",boxSizing:"content-box",borderRadius:4},displayBar:{background:e.palette.background.paper,position:"absolute",right:0,height:18,transition:"0.5s width",borderRadius:2,borderTopLeftRadius:0,borderBottomLeftRadius:0,border:"2px solid transparent",boxSizing:"border-box"},text:{fontSize:12,zIndex:2,position:"relative",color:e.palette.text.primary,width:"100%",textAlign:"center"}}}));t.a=function(e){var t=e.num,a=e.total,n=l(),r=Math.round(t/a*100);return c.a.createElement("div",{className:n.container},c.a.createElement("div",{className:n.displayBar,style:{width:"".concat(Math.min(Math.max(0,100-r),100),"%")}}),c.a.createElement("div",{className:n.text},e.children))}},266:function(e,t,a){"use strict";var n=a(6),r=a(224),c=a(0),l=a.n(c),o=a(256);t.a=function(e){var t=e.type,a=e.list,c={};return a.forEach((function(e){var t=e.state;c[t]=c[t]+1||1})),l.a.createElement(r.a,{container:!0,spacing:2,alignItems:"center"},l.a.createElement(r.a,{item:!0},l.a.createElement(o.a,{status:"TOTAL",type:t,suffix:"x ".concat(a.length)})),Object.entries(c).map((function(e){var a=Object(n.a)(e,2),c=a[0],i=a[1];return l.a.createElement(r.a,{item:!0},l.a.createElement(o.a,{status:c,type:t,suffix:" x ".concat(i)}))})))}},267:function(e,t,a){"use strict";a.d(t,"a",(function(){return I}));var n=a(6),r=a(2),c=a(229),l=a(227),o=a(181),i=a(287),s=a(235),m=a(230),d=a(228),u=a(231),p=a(224),g=a(510),v=a(511),b=a(263),E=a.n(b),f=a(0),h=a.n(f),y=a(81),k=a(89),j=a(261),O=a(262),x=a(260),N=a(264),w=a(265),C=a(258),I=function(e){var t=e.children,a=e.expandComponent,i=e.length,s=e.stateKey,m=void 0===s?"":s,d=Object(r.a)(e,["children","expandComponent","length","stateKey"]),u=h.a.useState(!1),p=Object(n.a)(u,2),b=p[0],E=p[1];return Object(f.useEffect)((function(){m.startsWith("ON")?E(!0):m.startsWith("OFF")&&E(!1)}),[m]),i<1?h.a.createElement(c.a,d,h.a.createElement(l.a,{padding:"checkbox"}),t):h.a.createElement(h.a.Fragment,null,h.a.createElement(c.a,d,h.a.createElement(l.a,{padding:"checkbox"},h.a.createElement(o.a,{style:{color:"inherit"},onClick:function(){return E(!b)}},i,b?h.a.createElement(g.a,null):h.a.createElement(v.a,null))),t),b&&h.a.createElement(c.a,null,h.a.createElement(l.a,{colSpan:24},a)))},S=function(e){var t=e.actorMap,a=e.coreWorkerStats,n={};return(a||[]).filter((function(e){return t[e.actorId]})).forEach((function(e){return n[e.actorId]=t[e.actorId]})),Object.values(n).length?h.a.createElement(i.a,null,h.a.createElement(N.a,{actors:n})):h.a.createElement("p",null,"The Worker Haven't Had Related Actor Yet.")};t.b=function(e){var t=e.workers,a=void 0===t?[]:t,r=e.actorMap,o=e.mini,i=Object(x.a)(),g=i.changeFilter,v=i.filterFunc,b=Object(f.useState)(""),N=Object(n.a)(b,2),A=N[0],D=N[1],M=Object(f.useContext)(k.a),P=M.nodeMap,F=M.ipLogMap;return h.a.createElement(h.a.Fragment,null,!o&&h.a.createElement("div",{style:{display:"flex",alignItems:"center"}},h.a.createElement(C.a,{label:"Pid",onChange:function(e){return g("pid",e)}}),h.a.createElement(s.a,{onClick:function(){return D("ON".concat(Math.random()))}},"Expand All"),h.a.createElement(s.a,{onClick:function(){return D("OFF".concat(Math.random()))}},"Collapse All"))," ",h.a.createElement(m.a,null,h.a.createElement(d.a,null,h.a.createElement(c.a,null,["","Pid","CPU","CPU Times","Memory","CMD Line","Create Time","Log","Ops","IP/Hostname"].map((function(e){return h.a.createElement(l.a,{align:"center",key:e},e)})))),h.a.createElement(u.a,null,a.filter(v).sort((function(e,t){var a=(e.coreWorkerStats||[]).filter((function(e){return r[e.actorId]})).length||0;return((t.coreWorkerStats||[]).filter((function(e){return r[e.actorId]})).length||0)-a})).map((function(e){var t=e.pid,a=e.cpuPercent,c=e.cpuTimes,o=e.memoryInfo,i=e.cmdline,m=e.createTime,d=e.coreWorkerStats,u=void 0===d?[]:d,g=e.language,v=e.ip,b=e.hostname;return h.a.createElement(I,{expandComponent:h.a.createElement(S,{actorMap:r,coreWorkerStats:u}),length:(u||[]).filter((function(e){return r[e.actorId]})).length,key:t,stateKey:A},h.a.createElement(l.a,{align:"center"},t),h.a.createElement(l.a,{align:"center"},h.a.createElement(w.a,{num:Number(a),total:100},a,"%")),h.a.createElement(l.a,{align:"center"},h.a.createElement("div",{style:{maxHeight:55,overflow:"auto"}},Object.entries(c||{}).map((function(e){var t=Object(n.a)(e,2),a=t[0],r=t[1];return h.a.createElement("div",{style:{margin:4}},a,":",r)})))),h.a.createElement(l.a,{align:"center"},h.a.createElement("div",{style:{maxHeight:55,overflow:"auto"}},Object.entries(o||{}).map((function(e){var t=Object(n.a)(e,2),a=t[0],r=t[1];return h.a.createElement("div",{style:{margin:4}},a,":",Object(j.a)(r))})))),h.a.createElement(l.a,{align:"center",style:{lineBreak:"anywhere"}},i&&Object(O.a)(i.filter((function(e){return e})).join(" "))),h.a.createElement(l.a,{align:"center"},E()(1e3*m).format("YYYY/MM/DD HH:mm:ss")),h.a.createElement(l.a,{align:"center"},h.a.createElement(p.a,{container:!0,spacing:2},F[v]&&h.a.createElement(p.a,{item:!0},h.a.createElement(y.b,{target:"_blank",to:"/log/".concat(encodeURIComponent(F[v]),"?fileName=").concat(u[0].jobId||"","-").concat(t)},"Log")))),h.a.createElement(l.a,{align:"center"},"JAVA"===g&&h.a.createElement("div",null,h.a.createElement(s.a,{onClick:function(){var e;window.open("#/cmd/jstack/".concat(null===(e=u[0])||void 0===e?void 0:e.ipAddress,"/").concat(t))}},"jstack")," ",h.a.createElement(s.a,{onClick:function(){var e;window.open("#/cmd/jmap/".concat(null===(e=u[0])||void 0===e?void 0:e.ipAddress,"/").concat(t))}},"jmap"),h.a.createElement(s.a,{onClick:function(){var e;window.open("#/cmd/jstat/".concat(null===(e=u[0])||void 0===e?void 0:e.ipAddress,"/").concat(t))}},"jstat"))),h.a.createElement(l.a,{align:"center"},v,h.a.createElement("br",null),P[b]?h.a.createElement(y.b,{target:"_blank",to:"/node/".concat(P[b])},b):b))})))))}},268:function(e,t,a){"use strict";var n=a(189),r=a(232),c=a(0),l=a.n(c);t.a=function(e){var t=e.loading;return l.a.createElement(n.a,{open:t,style:{zIndex:100}},l.a.createElement(r.a,{color:"primary"}))}},272:function(e,t,a){"use strict";var n=a(1),r=a(2),c=a(0),l=(a(5),a(3)),o=a(4),i=a(13),s=a(7),m=a(90),d=c.forwardRef((function(e,t){var a=e.classes,o=e.className,i=e.color,d=void 0===i?"secondary":i,u=e.edge,p=void 0!==u&&u,g=e.size,v=void 0===g?"medium":g,b=Object(r.a)(e,["classes","className","color","edge","size"]),E=c.createElement("span",{className:a.thumb});return c.createElement("span",{className:Object(l.a)(a.root,o,{start:a.edgeStart,end:a.edgeEnd}[p],"small"===v&&a["size".concat(Object(s.a)(v))])},c.createElement(m.a,Object(n.a)({type:"checkbox",icon:E,checkedIcon:E,classes:{root:Object(l.a)(a.switchBase,a["color".concat(Object(s.a)(d))]),input:a.input,checked:a.checked,disabled:a.disabled},ref:t},b)),c.createElement("span",{className:a.track}))}));t.a=Object(o.a)((function(e){return{root:{display:"inline-flex",width:58,height:38,overflow:"hidden",padding:12,boxSizing:"border-box",position:"relative",flexShrink:0,zIndex:0,verticalAlign:"middle","@media print":{colorAdjust:"exact"}},edgeStart:{marginLeft:-8},edgeEnd:{marginRight:-8},switchBase:{position:"absolute",top:0,left:0,zIndex:1,color:"light"===e.palette.type?e.palette.grey[50]:e.palette.grey[400],transition:e.transitions.create(["left","transform"],{duration:e.transitions.duration.shortest}),"&$checked":{transform:"translateX(20px)"},"&$disabled":{color:"light"===e.palette.type?e.palette.grey[400]:e.palette.grey[800]},"&$checked + $track":{opacity:.5},"&$disabled + $track":{opacity:"light"===e.palette.type?.12:.1}},colorPrimary:{"&$checked":{color:e.palette.primary.main,"&:hover":{backgroundColor:Object(i.c)(e.palette.primary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"&$disabled":{color:"light"===e.palette.type?e.palette.grey[400]:e.palette.grey[800]},"&$checked + $track":{backgroundColor:e.palette.primary.main},"&$disabled + $track":{backgroundColor:"light"===e.palette.type?e.palette.common.black:e.palette.common.white}},colorSecondary:{"&$checked":{color:e.palette.secondary.main,"&:hover":{backgroundColor:Object(i.c)(e.palette.secondary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"&$disabled":{color:"light"===e.palette.type?e.palette.grey[400]:e.palette.grey[800]},"&$checked + $track":{backgroundColor:e.palette.secondary.main},"&$disabled + $track":{backgroundColor:"light"===e.palette.type?e.palette.common.black:e.palette.common.white}},sizeSmall:{width:40,height:24,padding:7,"& $thumb":{width:16,height:16},"& $switchBase":{padding:4,"&$checked":{transform:"translateX(16px)"}}},checked:{},disabled:{},input:{left:"-100%",width:"300%"},thumb:{boxShadow:e.shadows[1],backgroundColor:"currentColor",width:20,height:20,borderRadius:"50%"},track:{height:"100%",width:"100%",borderRadius:7,zIndex:-1,transition:e.transitions.create(["opacity","background-color"],{duration:e.transitions.duration.shortest}),backgroundColor:"light"===e.palette.type?e.palette.common.black:e.palette.common.white,opacity:"light"===e.palette.type?.38:.3}}}),{name:"MuiSwitch"})(d)},522:function(e,t,a){"use strict";a.r(t);var n=a(6),r=a(2),c=a(223),l=a(224),o=a(272),i=a(247),s=a(241),m=a(287),d=a(263),u=a.n(d),p=a(0),g=a.n(p),v=a(81),b=a(264),E=a(268),f=a(265),h=a(256),y=a(255),k=a(267),j=a(261),O=a(12),x=a.n(O),N=a(17),w=a(89),C=a(92),I=Object(c.a)((function(e){return{root:{padding:e.spacing(2)},paper:{padding:e.spacing(2),marginTop:e.spacing(2),marginBottom:e.spacing(2)},label:{fontWeight:"bold"},tab:{marginBottom:e.spacing(2)}}})),S=["local_total_resource","local_available_resource","actor_stats","task_dependency_manager_stats","reconstruction_policy_stats","scheduling_queue_stats","object_manager_stats"],A=function(e){var t,a=e.view;if(!a)return null;var n=a.tags,c=void 0===n?"":n,o=Object(r.a)(a,["tags"]);return g.a.createElement(l.a,{item:!0,xs:6},g.a.createElement("span",null,null===(t=c.split(",").pop())||void 0===t?void 0:t.split(":").slice(1).join(":")),"=",Object.keys(o).length>0?JSON.stringify(Object.values(o).pop()):g.a.createElement("span",{style:{color:"gray"}},"null"))};t.default=function(e){var t,a=I(),r=function(e){var t=e.match.params,a=Object(p.useState)("info"),r=Object(n.a)(a,2),c=r[0],l=r[1],o=Object(p.useState)(),i=Object(n.a)(o,2),s=i[0],m=i[1],d=Object(p.useState)("Loading the node infos..."),u=Object(n.a)(d,2),g=u[0],v=u[1],b=Object(p.useContext)(w.a).namespaceMap,E=Object(p.useState)(!0),f=Object(n.a)(E,2),h=f[0],y=f[1],k=Object(p.useRef)(),j=Object(p.useCallback)(Object(N.a)(x.a.mark((function e(){var a,n,r,c,l;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(h){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Object(C.a)(t.id);case 4:a=e.sent,n=a.data,r=n.data,c=n.msg,l=n.result,(null===r||void 0===r?void 0:r.detail)&&m(r.detail),c&&v(c),!1===l&&(v("Node Query Error Please Check Node Name"),y(!1)),k.current=setTimeout(j,4e3);case 11:case"end":return e.stop()}}),e)}))),[h,t.id]),O=null===s||void 0===s?void 0:s.raylet;return Object(p.useEffect)((function(){return j(),function(){k.current&&clearTimeout(k.current)}}),[j]),{params:t,selectedTab:c,nodeDetail:s,msg:g,isRefreshing:h,onRefreshChange:function(e){y(e.target.checked)},raylet:O,handleChange:function(e,t){l(t)},namespaceMap:b}}(e),c=r.params,d=r.selectedTab,O=r.nodeDetail,D=r.msg,M=r.isRefreshing,P=r.onRefreshChange,F=r.raylet,R=r.handleChange;return g.a.createElement("div",{className:a.root},g.a.createElement(E.a,{loading:D.startsWith("Loading")}),g.a.createElement(y.a,{title:"NODE - ".concat(c.id)},g.a.createElement(h.a,{type:"node",status:(null===O||void 0===O||null===(t=O.raylet)||void 0===t?void 0:t.state)||"LOADING"}),g.a.createElement("br",null),"Auto Refresh:",g.a.createElement(o.a,{checked:M,onChange:P,name:"refresh",inputProps:{"aria-label":"secondary checkbox"}}),g.a.createElement("br",null),"Request Status: ",D),g.a.createElement(y.a,{title:"Node Detail"},g.a.createElement(i.a,{value:d,onChange:R,className:a.tab},g.a.createElement(s.a,{value:"info",label:"Info"}),g.a.createElement(s.a,{value:"raylet",label:"Raylet"}),g.a.createElement(s.a,{value:"worker",label:"Worker (".concat((null===O||void 0===O?void 0:O.workers.length)||0,")")}),g.a.createElement(s.a,{value:"actor",label:"Actor (".concat(Object.values((null===O||void 0===O?void 0:O.actors)||{}).length||0,")")})),O&&"info"===d&&g.a.createElement("div",{className:a.paper},g.a.createElement(l.a,{container:!0,spacing:2},g.a.createElement(l.a,{item:!0,xs:!0},g.a.createElement("div",{className:a.label},"Hostname")," ",O.hostname),g.a.createElement(l.a,{item:!0,xs:!0},g.a.createElement("div",{className:a.label},"IP")," ",O.ip)),g.a.createElement(l.a,{container:!0,spacing:2},g.a.createElement(l.a,{item:!0,xs:!0},g.a.createElement("div",{className:a.label},"CPU (Logic/Physic)")," ",O.cpus[0],"/ ",O.cpus[1]),g.a.createElement(l.a,{item:!0,xs:!0},g.a.createElement("div",{className:a.label},"Load (1/5/15min)")," ",(null===O||void 0===O?void 0:O.loadAvg[0])&&O.loadAvg[0].map((function(e){return Number(e).toFixed(2)})).join("/"))),g.a.createElement(l.a,{container:!0,spacing:2},g.a.createElement(l.a,{item:!0,xs:!0},g.a.createElement("div",{className:a.label},"Load per CPU (1/5/15min)")," ",(null===O||void 0===O?void 0:O.loadAvg[1])&&O.loadAvg[1].map((function(e){return Number(e).toFixed(2)})).join("/")),g.a.createElement(l.a,{item:!0,xs:!0},g.a.createElement("div",{className:a.label},"Boot Time")," ",u()(1e3*O.bootTime).format("YYYY/MM/DD HH:mm:ss"))),g.a.createElement(l.a,{container:!0,spacing:2},g.a.createElement(l.a,{item:!0,xs:!0},g.a.createElement("div",{className:a.label},"Sent Tps")," ",Object(j.a)(null===O||void 0===O?void 0:O.networkSpeed[0]),"/s"),g.a.createElement(l.a,{item:!0,xs:!0},g.a.createElement("div",{className:a.label},"Recieved Tps")," ",Object(j.a)(null===O||void 0===O?void 0:O.networkSpeed[1]),"/s")),g.a.createElement(l.a,{container:!0,spacing:2},g.a.createElement(l.a,{item:!0,xs:!0},g.a.createElement("div",{className:a.label},"Memory")," ",(null===O||void 0===O?void 0:O.mem)&&g.a.createElement(f.a,{num:Number((null===O||void 0===O?void 0:O.mem[0])-(null===O||void 0===O?void 0:O.mem[1])),total:null===O||void 0===O?void 0:O.mem[0]},Object(j.a)((null===O||void 0===O?void 0:O.mem[0])-(null===O||void 0===O?void 0:O.mem[1])),"/",Object(j.a)(null===O||void 0===O?void 0:O.mem[0]),"(",null===O||void 0===O?void 0:O.mem[2],"%)")),g.a.createElement(l.a,{item:!0,xs:!0},g.a.createElement("div",{className:a.label},"CPU")," ",g.a.createElement(f.a,{num:Number(O.cpu),total:100},O.cpu,"%"))),g.a.createElement(l.a,{container:!0,spacing:2},(null===O||void 0===O?void 0:O.disk)&&Object.entries(null===O||void 0===O?void 0:O.disk).map((function(e){var t=Object(n.a)(e,2),r=t[0],c=t[1];return g.a.createElement(l.a,{item:!0,xs:6,key:r},g.a.createElement("div",{className:a.label},"Disk (",r,")")," ",c&&g.a.createElement(f.a,{num:Number(c.used),total:c.total},Object(j.a)(c.used),"/",Object(j.a)(c.total),"(",c.percent,"%, ",Object(j.a)(c.free)," free)"))}))),g.a.createElement(l.a,{container:!0,spacing:2},g.a.createElement(l.a,{item:!0,xs:!0},g.a.createElement("div",{className:a.label},"Logs")," ",g.a.createElement(v.b,{to:"/log/".concat(encodeURIComponent(O.logUrl))},"log")))),F&&Object.keys(F).length>0&&"raylet"===d&&g.a.createElement(g.a.Fragment,null,g.a.createElement("div",{className:a.paper},g.a.createElement(l.a,{container:!0,spacing:2},g.a.createElement(l.a,{item:!0,xs:!0},g.a.createElement("div",{className:a.label},"Command"),g.a.createElement("br",null),g.a.createElement("div",{style:{height:200,overflow:"auto"}},null===O||void 0===O?void 0:O.cmdline.join(" ")))),g.a.createElement(l.a,{container:!0,spacing:2},g.a.createElement(l.a,{item:!0,xs:!0},g.a.createElement("div",{className:a.label},"Pid")," ",null===F||void 0===F?void 0:F.pid),g.a.createElement(l.a,{item:!0,xs:!0},g.a.createElement("div",{className:a.label},"Workers Num")," ",null===F||void 0===F?void 0:F.numWorkers),g.a.createElement(l.a,{item:!0,xs:!0},g.a.createElement("div",{className:a.label},"Node Manager Port")," ",null===F||void 0===F?void 0:F.nodeManagerPort)),S.map((function(e){return F.viewData.find((function(t){return t.viewName===e}))})).map((function(e){return e?g.a.createElement(g.a.Fragment,{key:e.viewName},g.a.createElement("p",{className:a.label},e.viewName.split("_").map((function(e){return e[0].toUpperCase()+e.slice(1)})).join(" ")),g.a.createElement(l.a,{container:!0,spacing:2,style:{maxHeight:177,overflow:"auto"}},e.measures.map((function(e){return g.a.createElement(A,{key:e.tags,view:e})})))):null})))),(null===O||void 0===O?void 0:O.workers)&&"worker"===d&&g.a.createElement(g.a.Fragment,null,g.a.createElement(m.a,{className:a.paper},g.a.createElement(k.b,{workers:null===O||void 0===O?void 0:O.workers,actorMap:null===O||void 0===O?void 0:O.actors}))),(null===O||void 0===O?void 0:O.actors)&&"actor"===d&&g.a.createElement(g.a.Fragment,null,g.a.createElement(m.a,{className:a.paper},g.a.createElement(b.a,{actors:O.actors,workers:null===O||void 0===O?void 0:O.workers})))))}}}]);
//# sourceMappingURL=9.555c27cd.chunk.js.map