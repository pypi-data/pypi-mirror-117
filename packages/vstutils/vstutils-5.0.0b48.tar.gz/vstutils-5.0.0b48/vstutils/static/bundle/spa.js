window.spa=function(e){function t(t){for(var o,r,a=t[0],l=t[1],c=t[2],u=0,g=[];u<a.length;u++)r=a[u],Object.prototype.hasOwnProperty.call(s,r)&&s[r]&&g.push(s[r][0]),s[r]=0;for(o in l)Object.prototype.hasOwnProperty.call(l,o)&&(e[o]=l[o]);for(f&&f(t);g.length;)g.shift()();return i.push.apply(i,c||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],o=!0,a=1;a<n.length;a++){var l=n[a];0!==s[l]&&(o=!1)}o&&(i.splice(t--,1),e=r(r.s=n[0]))}return e}var o={},s={5:0},i=[];function r(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=e,r.c=o,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/static/bundle/";var a=window.webpackJsonp_name_=window.webpackJsonp_name_||[],l=a.push.bind(a);a.push=t,a=a.slice();for(var c=0;c<a.length;c++)t(a[c]);var f=l;return i.push([319,0,2,4,1]),n()}({307:function(e,t,n){var o=n(4),s=n(308);"string"==typeof(s=s.__esModule?s.default:s)&&(s=[[e.i,s,""]]);var i={insert:"head",singleton:!1};o(s,i);e.exports=s.locals||{}},308:function(e,t,n){(t=n(5)(!1)).push([e.i,".ansi-black-fg{color:#000000}.ansi-red-fg{color:#ff6060}.ansi-green-fg{color:#60ff60}.ansi-yellow-fg{color:#ffff36}.ansi-blue-fg{color:#6060ff}.ansi-magenta-fg{color:#ff36ff}.ansi-cyan-fg{color:#36ffff}.ansi-white-fg{color:#ececec}.ansi-bright-black-fg{color:#363636}.ansi-bright-red-fg{color:#ff8080}.ansi-bright-green-fg{color:#80ff80}.ansi-bright-yellow-fg{color:#ffff80}.ansi-bright-blue-fg{color:#8080ff}.ansi-bright-magenta-fg{color:#ff80ff}.ansi-bright-cyan-fg{color:#80ffff}.ansi-bright-white-fg{color:#ffffff}.ansi-black-bg{background-color:#000000}.ansi-red-bg{background-color:#ff6060}.ansi-green-bg{background-color:#60ff60}.ansi-yellow-bg{background-color:#ffff36}.ansi-blue-bg{background-color:#6060ff}.ansi-magenta-bg{background-color:#ff36ff}.ansi-cyan-bg{background-color:#36ffff}.ansi-white-bg{background-color:#ececec}.ansi-bright-black-bg{background-color:#363636}.ansi-bright-red-bg{background-color:#ff8080}.ansi-bright-green-bg{background-color:#80ff80}.ansi-bright-yellow-bg{background-color:#ffff80}.ansi-bright-blue-bg{background-color:#8080ff}.ansi-bright-magenta-bg{background-color:#ff80ff}.ansi-bright-cyan-bg{background-color:#80ffff}.ansi-bright-white-bg{background-color:#ffffff}\n",""]),e.exports=t},319:function(e,t,n){"use strict";n.r(t),n.d(t,"TabSignal",(function(){return y.a})),n.d(t,"signals",(function(){return C.a})),n.d(t,"colors",(function(){return o})),n.d(t,"ComponentsRegistrator",(function(){return c.a})),n.d(t,"globalComponentsRegistrator",(function(){return c.b})),n.d(t,"AppRoot",(function(){return g.a})),n.d(t,"utils",(function(){return u})),n.d(t,"guiCustomizer",(function(){return I})),n.d(t,"setupVue",(function(){return U})),n.d(t,"popUp",(function(){return f})),n.d(t,"fields",(function(){return q})),n.d(t,"components",(function(){return D})),n.d(t,"models",(function(){return b})),n.d(t,"querySet",(function(){return m})),n.d(t,"views",(function(){return h})),n.d(t,"store",(function(){return d})),n.d(t,"router",(function(){return w})),n.d(t,"api",(function(){return l})),n.d(t,"users",(function(){return Q})),n.d(t,"App",(function(){return B}));var o={};n.r(o),n.d(o,"AnsiUp",(function(){return A.a})),n.d(o,"ansiToHTML",(function(){return E}));var s=n(9),i=n(61),r=n(149),a=n.n(r),l=n(11),c=n(10),f=n(6),u=n(0),g=n(56),p=n(151);var h=n(33),d=n(26),b=n(20),w=n(55),m=n(38),v=n(63),y=n.n(v),C=n(7),k=(n(15),n(281),n(282),n(284),n(286),n(142),n(13)),R=n.n(k),_=(n(290),n(79)),M=n.n(_),T=n(81),j=n.n(T),F=n(14),x=(n(291),n(57)),O=n.n(x),S=(n(293),n(78)),L=n.n(S),V=(n(84),n(85),n(86)),A=n.n(V);n(307);const P=new A.a;function E(e){return P.ansi_to_html(e).replace(/\t/g,"&nbsp;&nbsp;&nbsp;&nbsp;")}P.use_classes=!0;var I=n(148),U=n(143),q=n(18),D=n(146),Q=n(147);n(145);window.SELECT2_THEME="bootstrap",n(287),n(288),window.moment=R.a,window.md5=M.a,window.Visibility=j.a,window.IMask=F.a,window.iziToast=O.a,window.autoComplete=L.a;const $=(e,t)=>{if(0===e)return 0;const n=e>10&&e<20,o=e%10==1;return t<4?!n&&o?1:2:!n&&o?1:!n&&e%10>=2&&e%10<=4||t<4?2:3};class B extends class{constructor(e,t){this.config=e,this.schema=e.schema,this.router=null,this.cache=t,this.api=l.apiConnector.initConfiguration(e),this.translationsManager=new p.a(l.apiConnector,t),this.centrifugoClient=function(e,t){if(!e)return null;const n=new a.a(new URL("connection/websocket",e).toString());return t&&n.setToken(t),n}(this.schema.info["x-centrifugo-address"],this.schema.info["x-centrifugo-token"]),this.error_handler=new f.ErrorHandler,this.languages=null,this.translations=null,this.rawUser=null,this.user=null,this.global_components=c.b,this.appRootComponent=g.a,this.initLanguage=document.documentElement.lang||Object(u.getCookie)("lang")||"en"}afterInitialDataBeforeMount(){}async start(){this.centrifugoClient&&this.centrifugoClient.connect();const[e,t,n]=await Promise.all([this.translationsManager.getLanguages(),this.translationsManager.getTranslations(this.initLanguage),this.api.loadUser()]);this.languages=e,this.translations={[this.initLanguage]:t},this.rawUser=n,this.setLanguage(this.initLanguage),this.afterInitialDataBeforeMount();const o=this.views.get("/user/").objects,s=o.getModelClass(u.RequestTypes.RETRIEVE);this.user=new s(this.rawUser,o),this.global_components.registerAll(),this.prepare()}changeAppRootComponent(e){this.appRootComponent=e}resetAppRootComponent(){this.appRootComponent=g.a}prepare(){}}{constructor(e,t,n,o){super(e,t),this.fieldsClasses=n,this.getFieldFormat=Object(q.getFieldFormatFactory)(n),this.getField=Object(q.getFieldFactory)(n),this.modelsClasses=o,this.views=null,this.modelsResolver=null,this.qsResolver=null,this.application=null}getCurrentViewPath(){var e,t;return null===(e=this.application.$refs.currentViewComponent)||void 0===e||null===(t=e.view)||void 0===t?void 0:t.path}afterInitialDataBeforeMount(){this.prepareFieldsClasses(),new b.ModelConstructor(l.openapi_dictionary,this.config.schema,this.fieldsClasses,this.modelsClasses).generateModels(),this.modelsResolver=new b.ModelsResolver(this.modelsClasses,this.fieldsClasses,this.config.schema),this.views=new h.ViewConstructor(l.openapi_dictionary,this.modelsClasses,this.fieldsClasses).generateViews(this.config.schema),this.viewsTree=new h.ViewsTree(this.views),this.qsResolver=new m.QuerySetsResolver(this.viewsTree),this.setNestedViewsQuerysets()}prepareFieldsClasses(){for(const e of this.fieldsClasses.values())e.app=this}prepareViewsModelsFields(){for(const[e,t]of this.views){const n=new Set;if(t.objects)for(const e of Object.values(t.objects.models))if(Array.isArray(e))for(const t of e)n.add(t);else n.add(e);if(t.modelsList)for(const e of t.modelsList)e&&n.add(e);for(const t of n)if(t)for(const n of t.fields.values())n.prepareFieldForView(e);if(t.filters)for(const n of Object.values(t.filters))n.prepareFieldForView(e)}}setNestedViewsQuerysets(){for(const e of this.views.values())if(e instanceof h.PageNewView&&e.nestedAllowAppend){const t=e.listView,n=t.objects.getResponseModelClass(u.RequestTypes.LIST).name;try{t.nestedQueryset=this.qsResolver.findQuerySetForNested(n,t.path)}catch(n){console.warn(n),e.nestedAllowAppend=!1,t.actions.delete("add")}}}setLanguage(e){return this._prefetchTranslation(e).then(e=>(this.application.$i18n.locale=e,u.guiLocalSettings.set("lang",e),C.a.emit("app.language.changed",{lang:e}),document.documentElement.setAttribute("lang",e),document.cookie="lang=".concat(e),e))}_prefetchTranslation(e){return Object.values(this.languages).map(e=>e.code).includes(e)?this.translations[e]?Promise.resolve(e):this.translationsManager.getTranslations(e).then(t=>(this.translations={...this.translations,[e]:t},this.application.$i18n.setLocaleMessage(e,t),e)).catch(e=>{throw e}):Promise.reject(!1)}prepare(){C.a.emit("app.beforeInit",{app:this}),this.prepareViewsModelsFields();let e=new d.StoreConstructor(this,this.config.isDebug);C.a.emit("app.beforeInitStore",{storeConstructor:e});let t=new w.RouterConstructor(this.views,w.mixins.routesComponentsTemplates,w.mixins.customRoutesComponentsTemplates);C.a.emit("app.beforeInitRouter",{routerConstructor:t}),this.router=t.getRouter(),this.i18n=new i.a({locale:this.initLanguage,messages:this.translations,silentTranslationWarn:!0,formatFallbackMessages:!0,pluralizationRules:{ru:$}}),s.default.prototype.$app=this,this.application=new s.default({mixins:[this.appRootComponent],propsData:{info:this.config.schema.info,x_menu:this.config.schema.info["x-menu"],x_docs:this.config.schema.info["x-docs"]},router:this.router,store:e.getStore(),i18n:this.i18n}),C.a.emit("app.afterInit",{app:this})}mount(){this.application.$mount("#RealBody")}}window.App=B}});