var select2_widget=function(){function add_CSRF(xhr){xhr.setRequestHeader("X-CSRFToken",ajax_helpers.getCookie('csrftoken'));};function initselect2(select_id,ajax,tags){var select_element=$('#'+select_id);var modal_container=select_element.closest('.modal-content');if(modal_container.length===0){modal_container=$(document.body)};var data={};var modal_url=django_modal.modal_div().attr('data-url');var select2_params={theme:'bootstrap4',dropdownParent:modal_container,allowClear:true,placeholder:'-',};if(tags.enabled){select2_params.tags=true;select2_params.createTag=function(params){var term=$.trim(params.term);if(term===''){return null;};return{id:tags.new_marker+term,text:term,}}};if(ajax){select2_params.templateResult=function(text){return $('<div>'+text.text+'</div>');};select2_params.ajax={method:'POST',url:modal_url,beforeSend:function(xhr){xhr.setRequestHeader("X-CSRFToken",ajax_helpers.getCookie('csrftoken'))},cache:false,contentType:'application/json',data:function(params){data={};$($('#'+select_id).closest('form')).serializeArray().map(function(x){data[x.name]=x.value;});data['select2']=select_id.substring(3);data['search']=params.term;return JSON.stringify(data);}}};select_element.select2(select2_params);$('.select2-selection__rendered').hover(function(){$(this).removeAttr('title');});}}