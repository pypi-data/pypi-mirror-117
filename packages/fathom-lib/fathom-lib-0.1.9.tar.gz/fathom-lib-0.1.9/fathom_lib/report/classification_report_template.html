<!DOCTYPE html>
<html>
<head>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
         * {box-sizing: border-box}
         body {font-family: "Lato", sans-serif;}
         /* Style buttons */
         .button {
         background-color: #dddd; /* grey */
         border: none;
         color: black;
         padding: 15px 32px;
         text-align: center;
         text-decoration: none;
         display: inline-block;
         margin: 4px 2px;
         cursor: pointer;
         }
         .button1 {font-size: 10px;}
         .button2 {font-size: 12px;}
         .button3 {font-size: 16px;}
         .button4 {font-size: 20px;}
         .button5 {font-size: 24px;}
         /* Style text in help menu*/
         .div_button {
         background-color: #ADD8E6;
         padding: 0px 10px;
         margin: 2px;
         }
         /* Style the tab */
         .tab {
         float: left;
         border: 1px solid #ccc;
         background-color: #f1f1f1;
         width: 30%;
         height: 770px;
         }
         /* Style the buttons inside the tab */
         .tab button {
         display: block;
         background-color: inherit;
         color: black;
         padding: 7px 10px;
         width: 100%;
         border: none;
         outline: none;
         text-align: left;
         cursor: pointer;
         transition: 0.3s;
         font-size: 17px;
         }
         /* Change background color of buttons on hover */
         .tab button:hover {
         background-color: #ddd;
         }
         /* Create an active/current "tab button" class */
         .tab button.active {
         background-color: #ccc;
         }
         /* Style the tab content */
         .tabcontent {
         float: left;
         padding: 0px 12px;
         /* border: 1px solid #ccc; */
         width: 70%;
         border-left: none;
         height: 300px;
         }
         /* Style tables */
         table {
         width:50%;
         }
         table, th, td {
         border-collapse: collapse;
         font-size: 17px;
         }
         th, td {
         padding: 15px;
         text-align: left;
         }
         #t01 tr:nth-child(even) {
         background-color: #eee;
         }
         #t01 tr:nth-child(odd) {
         background-color: #fff;
         }
         #t01 th {
         background-color: black;
         color: white;
         }
      </style>
</head>
<body>
<h2>Classification report</h2>
<div class="tab">
  <button class="tablinks" onclick="openTab(event, 'Summary')" id="defaultOpen">Summary</button>
  <h3>INTERPRETATION</h3>
  <button class="tablinks" onclick="openTab(event, 'VariablesI')" id="defaultOpen">Variables Importance</button>
  <button class="tablinks" onclick="openTab(event, 'PartialD')" id="defaultOpen">Partial dependence</button>
  <h3>PERFORMANCE</h3>
  <button class="tablinks" onclick="openTab(event, 'ConfusionM')" id="defaultOpen">Confusion matrix</button>
  <button class="tablinks" onclick="openTab(event, 'DecisionC')" id="defaultOpen">Decision chart</button>
  <button class="tablinks" onclick="openTab(event, 'CalibrationC')" id="defaultOpen">Calibration curve</button>
  <button class="tablinks" onclick="openTab(event, 'ROCC')" id="defaultOpen">ROC curve</button>
  <button class="tablinks" onclick="openTab(event, 'DensityC')" id="defaultOpen">Density chart</button>
  <button class="tablinks" onclick="openTab(event, 'DetailedM')" id="defaultOpen">Detailed metrics</button>
  <h3>MODEL INFORMATION</h3>
  <button class="tablinks" onclick="openTab(event, 'DataP')" id="defaultOpen">Data preparation</button>
  <button class="tablinks" onclick="openTab(event, 'Features')" id="defaultOpen">Features</button>
  <button class="tablinks" onclick="openTab(event, 'Algorithm')" id="defaultOpen">Algorithm</button>
</div>
<div id="Summary" class="tabcontent">
  <h3>Summary</h3>
  <button onclick="summary_func()" class="button button3">Show more information</button>
  <div id="summary_div" style="display:none;" class="div_button">
    <br>
    Name of used classifier.
    <br><br>
    Main information about experiment, i.e. name, id, size of test set and accuracy on test set.
    <br>
    <br>
  </div>
  <script type="text/javascript">
            function summary_func() {
                var x = document.getElementById("summary_div");
                if (x.style.display === "none") {
                x.style.display = "inherit";
                } else {
                x.style.display = "none";
                }
                }
         </script>
  <br>
  <h1>{{classifier_name}}</h1>
  <table id=t01>
    <tr>
      <td>Experiment id</td>
      <td>{{experiment_id}}</td>
    </tr>
    <tr>
      <td>Experiment name:</td>
      <td>{{experiment_name}}</td>
    </tr>
    <tr>
      <td>Test set size:</td>
      <td>{{test_size}}</td>
    </tr>
    <tr>
      <td>Accuracy on test set:</td>
      <td>{{test_accuracy}}</td>
    </tr>
  </table>
</div>
<div id="VariablesI" class="tabcontent">
  <h3>Variables Importance</h3>
  <button onclick="variables_i_func()" class="button button3">Show more information</button>
  <div id="variables_i_div" style="display:none;" class="div_button">
    <br>
    Feature importance refers to a class of techniques for assigning scores to input features to a predictive model
    that indicates the relative importance of each feature when making a prediction.
    <br>
    <br>
  </div>
  <script type="text/javascript">
            function variables_i_func() {
                var x = document.getElementById("variables_i_div");
                if (x.style.display === "none") {
                x.style.display = "inherit";
                } else {
                x.style.display = "none";
                }
                }
         </script>
  {{VariablesI}}
</div>
<div id="PartialD" class="tabcontent">
  <h3>Partial Dependence</h3>
  <button onclick="partial_d_func()" class="button button3">Show more information</button>
  <div id="partial_d_div" style="display:none;" class="div_button">
    <br>
    Partial dependence plots (PDP) show the dependence between the target response and a set of input
    features of interest, marginalizing over the values of all other input features (the 'complement' features).
    Intuitively, we can interpret the partial dependence as the expected target response as a function of the input
    features of interest.
    <br><br>
    Due to the limits of human perception the size of the set of input feature of interest must be small
    (usually, one or two) thus the input features of interest are usually chosen among the most important features.
    <br>
    <br>
  </div>
  <script type="text/javascript">
            function partial_d_func() {
                var x = document.getElementById("partial_d_div");
                if (x.style.display === "none") {
                x.style.display = "inherit";
                } else {
                x.style.display = "none";
                }
                }
         </script>
  {{PartialD}}
</div>
<div id="ConfusionM" class="tabcontent">
  <h3>Confusion Matrix</h3>
  <button onclick="confusion_m_func()" class="button button3">Show more information</button>
  <div id="confusion_m_div" style="display:none;" class="div_button">
    <br>
    The confusion_matrix function evaluates classification accuracy by computing the confusion matrix with each row
    corresponding to the true class (Wikipedia and other references may use different convention for axes).
    <br><br>
    By definition, entry i, j
    in a confusion matrix is the number of observations actually in group i, but predicted to be in group j.
    <br>
    <br>
  </div>
  <script type="text/javascript">
            function confusion_m_func() {
                var x = document.getElementById("confusion_m_div");
                if (x.style.display === "none") {
                x.style.display = "inherit";
                } else {
                x.style.display = "none";
                }
                }
         </script>
  {{ConfusionM}}
</div>
<div id="DecisionC" class="tabcontent">
  <h3>Decision Chart</h3>
  <button onclick="decision_c_func()" class="button button3">Show more information</button>
  <div id="decision_c_div" style="display:none;" class="div_button">
    <br>
    Show precision, recall, F-1 for each class.
    <br><br>
    The precision is the ratio tp / (tp + fp) where tp is the number of true positives and fp the number of false
    positives. The precision is intuitively the ability of the classifier not to label as positive a sample that is
    negative.
    <br><br>
    The recall is the ratio tp / (tp + fn) where tp is the number of true positives and fn the number of false
    negatives. The recall is intuitively the ability of the classifier to find all the positive samples.
    <br><br>
    The F-1 score can be interpreted as a weighted harmonic mean of the precision and recall, where an F-1
    score reaches its best value at 1 and worst score at 0.
    <br>
    <br>
  </div>
  <script type="text/javascript">
            function decision_c_func() {
                var x = document.getElementById("decision_c_div");
                if (x.style.display === "none") {
                x.style.display = "inherit";
                } else {
                x.style.display = "none";
                }
                }
         </script>
  {{DecisionC}}
</div>
<div id="CalibrationC" class="tabcontent">
  <h3>Calibration Curve</h3>
  <button onclick="calibration_func()" class="button button3">Show more information</button>
  <div id="calibration_div" style="display:none;" class="div_button">
    <br>
    When performing classification you often want not only to predict the class label, but also obtain
    a probability of the respective label. This probability gives you some kind of confidence on the prediction.
    Some models can give you poor estimates of the class probabilities and some even do not support probability
    prediction (e.g., some instances of SGDClassifier). The calibration module allows you to better calibrate the
    probabilities of a given model, or to add support for probability prediction.
    <br><br>
    Well calibrated classifiers are probabilistic classifiers for which the output of the predict_proba method can be
    directly interpreted as a confidence level. For instance, a well calibrated (binary) classifier should classify
    the samples such that among the samples to which it gave a predict_proba value close to 0.8, approximately 80%
    actually belong to the positive class.
    <br>
    <br>
  </div>
  <script type="text/javascript">
            function calibration_func() {
                var x = document.getElementById("calibration_div");
                if (x.style.display === "none") {
                x.style.display = "inherit";
                } else {
                x.style.display = "none";
                }
                }
         </script>
  {{CalibrationC}}
</div>
<div id="ROCC" class="tabcontent">
  <h3>ROC Curve</h3>
  <button onclick="roc_func()" class="button button3">Show more information</button>
  <div id="roc_div" style="display:none;" class="div_button">
    <br>
    A receiver operating characteristic (ROC), or simply ROC curve,
    is a graphical plot which illustrates the performance of a binary classifier system as its
    discrimination threshold is varied. It is created by plotting the fraction of true positives
    out of the positives (TPR = true positive rate) vs. the fraction of false positives out of the
    negatives (FPR = false positive rate), at various threshold settings. TPR is also known as sensitivity,
    and FPR is one minus the specificity or true negative rate.
    <br>
    <br>
  </div>
  <script type="text/javascript">
            function roc_func() {
                var x = document.getElementById("roc_div");
                if (x.style.display === "none") {
                x.style.display = "inherit";
                } else {
                x.style.display = "none";
                }
                }
         </script>
  {{ROCC}}
</div>
<div id="DensityC" class="tabcontent">
  <h3>Density Chart</h3>
  <button onclick="density_func()" class="button button3">Show more information</button>
  <div id="density_div" style="display:none;" class="div_button">
    <br>
    This density chart illustrates how the model succeeds in recognising (and separating)
    the classes (e.g. 0 and 1 in binary classification). It shows the repartition of the
    actual classes in the validation set according to the predicted probability of
    being of said class learnt by the model.
    <br><br>
    The two density functions show the probability density of rows in the validation
    set that actually belong to the observed class vs. rows that don't.
    <br><br>
    A perfect model fully separates the density functions:<br>
    - the areas under density plots should not overlap<br>
    - the density function of 0 class should be entirely on the left<br>
    - the density function of 1 class should be entirely on the right<br>
    <br>
    <br>
  </div>
  <script type="text/javascript">
            function density_func() {
                var x = document.getElementById("density_div");
                if (x.style.display === "none") {
                x.style.display = "inherit";
                } else {
                x.style.display = "none";
                }
                }
         </script>
  {{DensityC}}
</div>
<div id="DetailedM" class="tabcontent">
  <h3>Detailed Metrics</h3>
  <button onclick="detailed_m_func()" class="button button3">Show more information</button>
  <div id="detailed_m_div" style="display:none;" class="div_button">
    <br>
    Information about metrics on train and test sets.
    <br>
    <br>
  </div>
  <script type="text/javascript">
            function detailed_m_func() {
                var x = document.getElementById("detailed_m_div");
                if (x.style.display === "none") {
                x.style.display = "inherit";
                } else {
                x.style.display = "none";
                }
                }
         </script>
  <table id=t01>
    {% for key, value in metrics_dict.items() %}
    <tr>
      <td>{{key}}</td>
      <td>{{value}}</td>
    </tr>
    {% endfor %}
  </table>
</div>
<div id="DataP" class="tabcontent">
  <h3>Data Preparation</h3>
  <button onclick="data_p_func()" class="button button3">Show more information</button>
  <div id="data_p_div" style="display:none;" class="div_button">
    <br>
    Information about data preparation steps.
    <br>
    <br>
  </div>
  <script type="text/javascript">
            function data_p_func() {
                var x = document.getElementById("data_p_div");
                if (x.style.display === "none") {
                x.style.display = "inherit";
                } else {
                x.style.display = "none";
                }
                }
         </script>
  <br>
  <table id=t01>
    {% for key, value in preparation_dict.items() %}
    <tr>
      <td>{{key}}</td>
      <td>{{value}}</td>
    </tr>
    {% endfor %}
  </table>
</div>
<div id="Features" class="tabcontent">
  <h3>Features</h3>
  <button onclick="features_func()" class="button button3">Show more information</button>
  <div id="features_div" style="display:none;" class="div_button">
    <br>
    This tab shows all the features used by the model, their data type and the number of non-null values.
    <br>
    <br>
  </div>
  <script type="text/javascript">
            function features_func() {
                var x = document.getElementById("features_div");
                if (x.style.display === "none") {
                x.style.display = "inherit";
                } else {
                x.style.display = "none";
                }
                }
         </script>
  {{Features}}
</div>
<div id="Algorithm" class="tabcontent">
  <h3>Algorithm</h3>
  <button onclick="algorithm_func()" class="button button3">Show more information</button>
  <div id="algorithm_div" style="display:none;" class="div_button">
    <br>
    Information about all parameters of trained model.
    <br>
    <br>
  </div>
  <script type="text/javascript">
            function algorithm_func() {
                var x = document.getElementById("algorithm_div");
                if (x.style.display === "none") {
                x.style.display = "inherit";
                } else {
                x.style.display = "none";
                }
                }
         </script>
  <br>
  <table id=t01>
    {% for key, value in algorithm_dict.items() %}
    <tr>
      <td>{{key}}</td>
      <td>{{value}}</td>
    </tr>
    {% endfor %}
  </table>
</div>
<script>
         function openTab(evt, tabName) {
           var i, tabcontent, tablinks;
           tabcontent = document.getElementsByClassName("tabcontent");
           for (i = 0; i < tabcontent.length; i++) {
             tabcontent[i].style.display = "none";
           }
           tablinks = document.getElementsByClassName("tablinks");
           for (i = 0; i < tablinks.length; i++) {
             tablinks[i].className = tablinks[i].className.replace(" active", "");
           }
           document.getElementById(tabName).style.display = "block";
           evt.currentTarget.className += " active";
         }

         // Get the element with id="defaultOpen" and click on it
         document.getElementById("defaultOpen").click();
      </script>
</body>
</html>
